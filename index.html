<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareLoop - Safe Verified Care</title>
	<link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo" onclick="showPage('home')">
            <svg class="logo-icon" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
            </svg>
            <h1>CareLoop</h1>
        </div>
        <div style="display: flex; gap: 1rem; align-items: center;">
            <button class="btn btn-primary" id="user-profile-btn" onclick="showUserProfile()" style="display: none;">My Profile</button>
            <button class="btn btn-primary" id="caregiver-profile-btn" onclick="showCaregiverProfile()" style="display: none;">My Profile</button>
            <button class="btn btn-outline" id="logout-btn" onclick="logout()" style="display: none;">Logout</button>
        </div>
    </div>

    <!-- Home Page -->
    <div id="home-page" class="page">
        <div class="hero">
            <h2>Safe, Verified Care<br>When You Need It Most</h2>
            <p>Connect with trusted caregivers for elderly, children, OKU individuals, and pets</p>
            <div class="hero-buttons">
                <button class="btn btn-primary" style="padding: 1rem 2rem; font-size: 1.125rem;" onclick="showPage('user-login')">
                    I Need a Caregiver
                </button>
                <button class="btn btn-outline" style="padding: 1rem 2rem; font-size: 1.125rem;" onclick="showPage('caregiver-login')">
                    I Am a Caregiver
                </button>
            </div>
        </div>

        <div class="container">
            <div class="features">
                <div class="feature-card">
                    <svg class="feature-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                    </svg>
                    <h3>Verified Profiles</h3>
                    <p>All caregivers undergo ID and background checks for your peace of mind</p>
                </div>
                <div class="feature-card">
                    <svg class="feature-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"/>
                    </svg>
                    <h3>Secure Payments</h3>
                    <p>Escrow protection ensures safe transactions for both parties</p>
                </div>
                <div class="feature-card">
                    <svg class="feature-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"/>
                    </svg>
                    <h3>Transparent Ratings</h3>
                    <p>Read real reviews and ratings from verified users</p>
                </div>
                <div class="feature-card">
                    <svg class="feature-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                    </svg>
                    <h3>Location Matching</h3>
                    <p>Find caregivers near you with distance-based filtering</p>
                </div>
                <div class="feature-card">
                    <svg class="feature-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"/>
                    </svg>
                    <h3>Certified Professionals</h3>
                    <p>View certifications and training credentials on profiles</p>
                </div>
                <div class="feature-card">
                    <svg class="feature-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
                    </svg>
                    <h3>Insurance Protected</h3>
                    <p>Coverage protection for users during caregiving services</p>
                </div>
            </div>
        </div>
    </div>

    <!-- User Login Page -->
    <div id="user-login-page" class="page hidden">
        <div class="container" style="max-width: 500px; margin-top: 3rem;">
            <div class="modal-content">
                <h2 style="font-size: 2rem; margin-bottom: 0.5rem;">Welcome Back!</h2>
                <p style="color: #6b7280; margin-bottom: 2rem;">Login to access your account</p>
                
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="user-login-email" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="user-login-password" placeholder="Enter your password">
                </div>
                <button class="btn btn-primary" style="width: 100%; padding: 1rem; margin-bottom: 1rem;" onclick="loginUser()">
                    Login
                </button>
                <p style="text-align: center; color: #6b7280;">
                    Don't have an account? <a href="#" onclick="showPage('signup')" style="color: #9333ea; font-weight: 600;">Sign Up</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Sign Up Page -->
    <div id="signup-page" class="page hidden">
        <div class="container" style="max-width: 600px; margin-top: 3rem;">
            <div class="modal-content">
                <h2 style="font-size: 2rem; margin-bottom: 0.5rem;">Create Your Account</h2>
                <p style="color: #6b7280; margin-bottom: 2rem;">Let's find the perfect caregiver for your needs</p>
                
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="user-name" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label>Gender</label>
                    <select id="user-gender">
                        <option value="">Select gender</option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="user-email" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="user-phone" placeholder="+60 12-345 6789">
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" id="user-location" placeholder="Enter your city or area">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="user-password" placeholder="Create a strong password">
                </div>
                <button class="btn btn-primary" style="width: 100%; padding: 1rem; margin-bottom: 1rem;" onclick="completeUserSignup()">
                    Continue
                </button>
                <p style="text-align: center; color: #6b7280;">
                    Already have an account? <a href="#" onclick="showPage('user-login')" style="color: #9333ea; font-weight: 600;">Login</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Care Details Page -->
    <div id="care-details-page" class="page hidden">
        <div class="container" style="max-width: 600px; margin-top: 3rem;">
            <div class="modal-content">
                <h2 style="font-size: 2rem; margin-bottom: 0.5rem;">Tell Us About Your Care Needs</h2>
                <p style="color: #6b7280; margin-bottom: 2rem;">This helps us match you with the right caregiver</p>
                
                <div class="form-group">
                    <label>Who needs care?</label>
                    <select id="care-type">
                        <option value="">Select care type</option>
                        <option value="Elderly">Elderly Care</option>
                        <option value="Child">Child Care</option>
                        <option value="OKU">OKU Individual Care</option>
                        <option value="Pet">Pet Care</option>
                    </select>
                </div>
                <div class="grid grid-2">
                    <div class="form-group">
                        <label>Start Date</label>
                        <input type="date">
                    </div>
                    <div class="form-group">
                        <label>Duration</label>
                        <select>
                            <option>Select duration</option>
                            <option>One-time</option>
                            <option>Daily</option>
                            <option>Weekly</option>
                            <option>Long-term</option>
                        </select>
                    </div>
                </div>
                <button class="btn btn-primary" style="width: 100%; padding: 1rem;" onclick="showPage('browse-caregivers')">
                    Find Caregivers
                </button>
            </div>
        </div>
    </div>

    <!-- NEW PAGE: Care Type Selection (After Login) -->
    <div id="care-type-selection-page" class="page hidden">
        <div class="container" style="max-width: 800px; margin-top: 3rem;">
            <div class="modal-content">
                <h2 style="font-size: 2rem; margin-bottom: 0.5rem;">What Type of Care Do You Need?</h2>
                <p style="color: #6b7280; margin-bottom: 2rem;">Select the care service you're looking for</p>
            
                <div class="grid grid-2" style="gap: 1.5rem; margin-bottom: 2rem;">
                    <div class="feature-card" style="cursor: pointer; transition: all 0.3s;" onclick="selectCareType('Elderly')">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üë¥</div>
                            <h3 style="font-size: 1.25rem; margin-bottom: 0.5rem;">Elderly Care</h3>
                            <p style="color: #6b7280; font-size: 0.875rem;">For seniors needing daily assistance and companionship</p>
                        </div>
                    </div>
                
                    <div class="feature-card" style="cursor: pointer; transition: all 0.3s;" onclick="selectCareType('Child')">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üë∂</div>
                            <h3 style="font-size: 1.25rem; margin-bottom: 0.5rem;">Child Care</h3>
                            <p style="color: #6b7280; font-size: 0.875rem;">For children needing supervision and care</p>
                        </div>
                    </div>
                
                    <div class="feature-card" style="cursor: pointer; transition: all 0.3s;" onclick="selectCareType('OKU')">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">‚ôø</div>
                            <h3 style="font-size: 1.25rem; margin-bottom: 0.5rem;">OKU Care</h3>
                            <p style="color: #6b7280; font-size: 0.875rem;">For individuals with disabilities needing special care</p>
                        </div>
                    </div>
                
                    <div class="feature-card" style="cursor: pointer; transition: all 0.3s;" onclick="selectCareType('Pet')">
                        <div style="text-align: center;">
                            <div style="font-size: 3rem; margin-bottom: 1rem;">üêï</div>
                            <h3 style="font-size: 1.25rem; margin-bottom: 0.5rem;">Pet Care</h3>
                            <p style="color: #6b7280; font-size: 0.875rem;">For pets needing feeding, walking, and care</p>
                        </div>
                    </div>
                </div>
            
                <button class="btn btn-outline" style="width: 100%;" onclick="selectCareType('')">
                    Show All Caregivers
                </button>
            </div>
        </div>
    </div>


    <!-- Browse Caregivers Page -->
    <div id="browse-caregivers-page" class="page hidden">
        <div class="container" style="margin-top: 2rem;">
            <h2 style="font-size: 2rem; margin-bottom: 0.5rem;">Available Caregivers Near You</h2>
            <p style="color: #6b7280; margin-bottom: 2rem;" id="caregiver-count">Found caregivers</p>
            
            <div class="grid grid-3" id="caregiver-list">
                <!-- Caregivers will be inserted here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Caregiver Detail Page -->
    <div id="caregiver-profile-page" class="page hidden">
        <div class="container" style="max-width: 900px; margin-top: 2rem;">
            <button class="btn btn-outline" onclick="showPage('browse-caregivers')" style="margin-bottom: 1rem;">
                ‚Üê Back to Search
            </button>
            
            <div class="modal-content">
                <div style="display: flex; gap: 2rem; margin-bottom: 2rem; flex-wrap: wrap;">
                    <div class="avatar" style="width: 100px; height: 100px; font-size: 2rem;" id="profile-avatar"></div>
                    <div style="flex: 1;">
                        <h2 style="font-size: 2rem; margin-bottom: 0.5rem;" id="profile-name"></h2>
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
                            <div class="rating" id="profile-rating"></div>
                            <p style="color: #6b7280;" id="profile-experience"></p>
                        </div>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <button class="btn btn-primary" onclick="showPage('booking-payment')">Book Now</button>
                            <button class="btn btn-outline" onclick="openChat()">üí¨ Chat with Caregiver</button>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 2rem; font-weight: bold; color: #9333ea;" id="profile-rate"></div>
                        <span class="badge badge-available" id="profile-availability"></span>
                    </div>
                </div>

                <div class="grid grid-2" style="margin-bottom: 2rem;">
                    <div>
                        <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">Specialties</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;" id="profile-specialties"></div>
                        
                        <h3 style="font-size: 1.25rem; margin-top: 1.5rem; margin-bottom: 1rem;">Certifications</h3>
                        <ul id="profile-certifications"></ul>
                    </div>
                    <div>
                        <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">Languages</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;" id="profile-languages"></div>
                        
                        <h3 style="font-size: 1.25rem; margin-top: 1.5rem; margin-bottom: 1rem;">Verification Status</h3>
                        <ul>
                            <li style="margin-bottom: 0.5rem;">‚úì Identity Verified</li>
                            <li style="margin-bottom: 0.5rem;">‚úì Background Check Complete</li>
                            <li style="margin-bottom: 0.5rem;">‚úì Insurance Protected</li>
                        </ul>
                    </div>
                </div>

                <h3 style="font-size: 1.5rem; margin-bottom: 1rem;">Recent Reviews</h3>
                <div style="border-top: 1px solid #e5e7eb; padding-top: 1rem;">
                    <div style="margin-bottom: 1rem;">
                        <div style="display: flex; gap: 1rem; align-items: start;">
                            <div class="avatar" style="width: 48px; height: 48px;">U1</div>
                            <div>
                                <div class="rating" style="margin-bottom: 0.5rem;">
                                    <span>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</span>
                                </div>
                                <p style="color: #6b7280;">Excellent caregiver! Very professional and caring. Highly recommended.</p>
                                <p style="color: #9ca3af; font-size: 0.875rem; margin-top: 0.5rem;">2 weeks ago</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Booking & Payment Page -->
    <div id="booking-payment-page" class="page hidden">
        <div class="container" style="max-width: 800px; margin-top: 2rem;">
            <button class="btn btn-outline" onclick="showPage('caregiver-profile')" style="margin-bottom: 1rem;">
                ‚Üê Back to Profile
            </button>
        
            <h2 style="font-size: 2rem; margin-bottom: 2rem;">Complete Your Booking</h2>
        
            <div class="modal-content">
                <h3 style="font-size: 1.5rem; margin-bottom: 1rem;">Booking Details</h3>
            
                <div class="form-group">
                    <label>Number of Hours</label>
                    <input type="number" id="booking-hours" value="4" min="1" max="24" onchange="updatePrice()">
                </div>

                <div class="grid grid-2">
                    <div class="form-group">
                        <label>Start Date</label>
                        <input type="date" id="booking-date">
                    </div>
                    <div class="form-group">
                        <label>Start Time</label>
                        <input type="time" id="booking-time">
                    </div>
                </div>

                <!-- NEW: Location Section -->
                <div class="form-group">
                    <label>Service Location</label>
                    <div style="margin-bottom: 1rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="location-option" value="default" checked onchange="toggleLocationInput()">
                            <span>Use my registered address</span>
                        </label>
                        <p style="color: #6b7280; font-size: 0.875rem; margin-left: 1.5rem; margin-top: 0.25rem;" id="default-location-display"></p>
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="location-option" value="custom" onchange="toggleLocationInput()">
                            <span>Use different address</span>
                        </label>
                    </div>
                    <input type="text" id="booking-location" placeholder="Enter service address" style="display: none;">
                </div>

                <!-- NEW: Special Needs Section -->
                <div class="form-group">
                    <label>Special Requests or Requirements</label>
                    <textarea id="booking-special-needs" rows="4" placeholder="Please describe any special needs, medical conditions, preferences, or specific instructions for the caregiver..."></textarea>
                </div>

                <div style="border: 2px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin: 1.5rem 0; cursor: pointer;" id="insurance-box" onclick="toggleInsurance()">
                    <div style="display: flex; gap: 1rem;">
                        <input type="checkbox" id="insurance-checkbox">
                        <div style="flex: 1;">
                            <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                                <strong>Add Insurance Protection</strong>
                                <strong style="color: #9333ea;">+RM 6</strong>
                            </div>
                            <p style="color: #6b7280; font-size: 0.875rem;">Covers accidents, property damage, and medical emergencies during the caregiving service.</p>
                            <ul style="margin-top: 0.5rem; font-size: 0.875rem; color: #6b7280;">
                                <li>‚úì Up to RM 50,000 coverage</li>
                                <li>‚úì 24/7 emergency support</li>
                                <li>‚úì Medical expense coverage</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="price-summary">
                    <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">Payment Summary</h3>
                    <div class="price-row">
                        <span>Hourly Rate</span>
                        <span id="hourly-rate">RM 25/hour</span>
                    </div>
                    <div class="price-row">
                        <span>Duration</span>
                        <span id="duration-display">4 hours</span>
                    </div>
                    <div class="price-row">
                        <span>Subtotal</span>
                        <span id="subtotal">RM 100</span>
                    </div>
                    <div class="price-row" id="insurance-row" style="display: none;">
                        <span>Insurance Protection</span>
                        <span style="color: #9333ea;">RM 6</span>
                    </div>
                    <div class="price-row">
                        <span>Service Fee (5%)</span>
                        <span id="service-fee">RM 5</span>
                    </div>
                    <div class="price-total">
                        <div class="price-row">
                            <span>Total</span>
                            <span style="color: #9333ea;" id="total-price">RM 105</span>
                        </div>
                    </div>
                </div>

                <button class="btn btn-primary" style="width: 100%; padding: 1rem; margin-top: 1.5rem;" onclick="confirmBooking()">
                    Confirm & Pay
                </button>
            </div>
        </div>
    </div>

    <!-- User Profile Page -->
    <div id="user-profile-page" class="page hidden">
        <div class="container" style="max-width: 1000px; margin-top: 2rem;">
            <h2 style="font-size: 2rem; margin-bottom: 2rem;">My Profile</h2>
            
            <div class="grid grid-2" style="gap: 2rem;">
                <!-- Profile Information -->
                <div class="modal-content">
                    <h3 style="font-size: 1.5rem; margin-bottom: 1.5rem;">Profile Information</h3>
                    <div class="avatar" style="width: 80px; height: 80px; font-size: 1.5rem; margin-bottom: 1.5rem;" id="user-profile-avatar">JD</div>
                    
                    <div id="profile-view-mode">
                        <div style="margin-bottom: 1rem;">
                            <p style="color: #6b7280; font-size: 0.875rem;">Name</p>
                            <p style="font-size: 1.125rem; font-weight: 600;" id="user-profile-name">-</p>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <p style="color: #6b7280; font-size: 0.875rem;">Gender</p>
                            <p style="font-size: 1.125rem; font-weight: 600;" id="user-profile-gender">-</p>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <p style="color: #6b7280; font-size: 0.875rem;">Email</p>
                            <p style="font-size: 1.125rem; font-weight: 600;" id="user-profile-email">-</p>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <p style="color: #6b7280; font-size: 0.875rem;">Phone</p>
                            <p style="font-size: 1.125rem; font-weight: 600;" id="user-profile-phone">-</p>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <p style="color: #6b7280; font-size: 0.875rem;">Location</p>
                            <p style="font-size: 1.125rem; font-weight: 600;" id="user-profile-location">-</p>
                        </div>
                        <button class="btn btn-outline" style="width: 100%; margin-top: 1rem;" onclick="enableEditProfile()">Edit Profile</button>
                    </div>

                    <div id="profile-edit-mode" style="display: none;">
                        <div class="form-group">
                            <label>Name</label>
                            <input type="text" id="edit-user-name">
                        </div>
                        <div class="form-group">
                            <label>Gender</label>
                            <select id="edit-user-gender">
                                <option value="Male">Male</option>
                                <option value="Female">Female</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Email</label>
                            <input type="email" id="edit-user-email">
                        </div>
                        <div class="form-group">
                            <label>Phone</label>
                            <input type="tel" id="edit-user-phone">
                        </div>
                        <div class="form-group">
                            <label>Location</label>
                            <input type="text" id="edit-user-location">
                        </div>
                        <div style="display: flex; gap: 1rem;">
                            <button class="btn btn-primary" style="flex: 1;" onclick="saveUserProfile()">Save Changes</button>
                            <button class="btn btn-outline" style="flex: 1;" onclick="cancelEditProfile()">Cancel</button>
                        </div>
                    </div>
                </div>

                <!-- Booking History & Messages -->
                <div>
                    <div class="modal-content" style="margin-bottom: 2rem;">
                        <h3 style="font-size: 1.5rem; margin-bottom: 1.5rem;">Booking History</h3>
                        <div id="booking-history">
                            <p style="color: #9ca3af; text-align: center; padding: 2rem;">No bookings yet</p>
                        </div>
                    </div>

                    <div class="modal-content">
                        <h3 style="font-size: 1.5rem; margin-bottom: 1.5rem;">My Messages</h3>
                        <div id="user-messages-list">
                            <p style="color: #9ca3af; text-align: center; padding: 2rem;">No messages yet</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Caregiver Login Page -->
    <div id="caregiver-login-page" class="page hidden">
        <div class="container" style="max-width: 500px; margin-top: 3rem;">
            <div class="modal-content">
                <h2 style="font-size: 2rem; margin-bottom: 0.5rem;">Caregiver Login</h2>
                <p style="color: #6b7280; margin-bottom: 2rem;">Access your caregiver dashboard</p>
                
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="caregiver-login-email" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="caregiver-login-password" placeholder="Enter your password">
                </div>
                <button class="btn btn-primary" style="width: 100%; padding: 1rem; margin-bottom: 1rem;" onclick="loginCaregiver()">
                    Login
                </button>
                <p style="text-align: center; color: #6b7280;">
                    New caregiver? <a href="#" onclick="showPage('caregiver-signup')" style="color: #9333ea; font-weight: 600;">Sign Up</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Caregiver Sign Up Page -->
    <div id="caregiver-signup-page" class="page hidden">
        <div class="container" style="max-width: 600px; margin-top: 3rem;">
            <div class="modal-content">
                <h2 style="font-size: 2rem; margin-bottom: 0.5rem;">Join as a Caregiver</h2>
                <p style="color: #6b7280; margin-bottom: 2rem;">Start your verified caregiving career with CareLoop</p>
                
                <div class="form-group">
                    <label>Full Name</label>
                    <input type="text" id="caregiver-name" placeholder="Enter your full name">
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="caregiver-email" placeholder="your@email.com">
                </div>
                <div class="form-group">
                    <label>Phone Number</label>
                    <input type="tel" id="caregiver-phone" placeholder="+60 12-345 6789">
                </div>
                <div class="form-group">
                    <label>Location</label>
                    <input type="text" id="caregiver-location" placeholder="Your city or area">
                </div>
                <div class="form-group">
                    <label>Experience (years)</label>
                    <input type="number" id="caregiver-experience" placeholder="Years of experience" min="0">
                </div>
                <div class="form-group">
                    <label>Specialties (select multiple)</label>
                    <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" name="specialty" value="Elderly Care"> Elderly Care
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" name="specialty" value="Child Care"> Child Care
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" name="specialty" value="OKU Care"> OKU Care
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem;">
                            <input type="checkbox" name="specialty" value="Pet Care"> Pet Care
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label>Hourly Rate (RM)</label>
                    <input type="number" id="caregiver-rate" placeholder="Your hourly rate" min="15">
                </div>
                <div class="form-group">
                    <label>Upload Certificates (Optional)</label>
                    <div style="border: 2px dashed #d1d5db; border-radius: 0.5rem; padding: 2rem; text-align: center; cursor: pointer;" onclick="document.getElementById('cert-upload').click()">
                        <input type="file" id="cert-upload" multiple accept=".pdf,.jpg,.png" style="display: none;" onchange="handleCertUpload(event)">
                        <p style="font-size: 2rem; margin-bottom: 0.5rem;">üéì</p>
                        <p style="color: #6b7280;">Click to upload certificates</p>
                        <p style="color: #9ca3af; font-size: 0.875rem; margin-top: 0.5rem;">PDF, PNG, JPG up to 10MB each</p>
                    </div>
                    <div id="cert-list" style="margin-top: 1rem;"></div>
                </div>
                <div class="form-group">
                    <label>ID Number (MyKad/Passport)</label>
                    <input type="text" id="caregiver-id" placeholder="For verification purposes">
                </div>
                <div class="form-group">
                    <label>Upload ID Document</label>
                    <div style="border: 2px dashed #d1d5db; border-radius: 0.5rem; padding: 2rem; text-align: center; cursor: pointer;" onclick="document.getElementById('id-upload').click()">
                        <input type="file" id="id-upload" accept=".jpg,.png,.pdf" style="display: none;" onchange="handleIdUpload(event)">
                        <p style="font-size: 2rem; margin-bottom: 0.5rem;">üìÑ</p>
                        <p style="color: #6b7280;">Click to upload your ID (front & back)</p>
                        <p style="color: #9ca3af; font-size: 0.875rem; margin-top: 0.5rem;">PNG, JPG, PDF up to 10MB</p>
                    </div>
                    <div id="id-file-name" style="margin-top: 1rem;"></div>
                </div>
                <div class="form-group">
                    <label>Password</label>
                    <input type="password" id="caregiver-password" placeholder="Create a strong password">
                </div>
                <button class="btn btn-primary" style="width: 100%; padding: 1rem; margin-bottom: 1rem;" onclick="submitCaregiverSignup()">
                    Submit for Verification
                </button>
                <p style="text-align: center; color: #6b7280;">
                    Already registered? <a href="#" onclick="showPage('caregiver-login')" style="color: #9333ea; font-weight: 600;">Login</a>
                </p>
            </div>
        </div>
    </div>

    <!-- Caregiver Dashboard Page -->
    <div id="caregiver-dashboard-page" class="page hidden">
        <div class="container" style="margin-top: 2rem;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
                <div>
                    <h2 style="font-size: 2rem; margin-bottom: 0.5rem;">Welcome Back, <span id="caregiver-dashboard-name">Caregiver</span>!</h2>
                    <p style="color: #6b7280;">Manage your profile, bookings, and earnings</p>
                </div>
            </div>
            
            <div style="background: #dcfce7; border: 1px solid #86efac; border-radius: 0.5rem; padding: 1rem; margin-bottom: 2rem;">
                <strong style="color: #166534;">‚úì Verification Complete!</strong>
                <p style="color: #15803d; margin-top: 0.25rem;">Your profile is active and visible to users</p>
            </div>

            <!-- Stats Overview -->
            <div class="grid grid-3" style="margin-bottom: 2rem;">
                <div class="feature-card">
                    <h3 style="color: #6b7280; font-size: 0.875rem; margin-bottom: 0.5rem;">Total Earnings</h3>
                    <p style="font-size: 2rem; font-weight: bold; color: #16a34a;" id="total-earnings">RM 0</p>
                    <p style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">+0% this month</p>
                </div>
                <div class="feature-card">
                    <h3 style="color: #6b7280; font-size: 0.875rem; margin-bottom: 0.5rem;">Completed Jobs</h3>
                    <p style="font-size: 2rem; font-weight: bold;" id="completed-jobs">0</p>
                    <p style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;" id="weekly-jobs">0 this week</p>
                </div>
                <div class="feature-card">
                    <h3 style="color: #6b7280; font-size: 0.875rem; margin-bottom: 0.5rem;">Average Rating</h3>
                    <p style="font-size: 2rem; font-weight: bold; color: #eab308;" id="caregiver-rating">‚≠ê 5.0</p>
                    <p style="color: #6b7280; font-size: 0.875rem; margin-top: 0.25rem;">Based on <span id="rating-count">0</span> reviews</p>
                </div>
            </div>

            <div class="grid grid-2" style="gap: 2rem;">
                <!-- New Job Requests -->
                <div>
                    <div class="modal-content" style="margin-bottom: 2rem;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                        <h3 style="font-size: 1.5rem; margin: 0;">New Job Requests</h3>
                        <button class="btn btn-outline" onclick="loadJobRequests()" style="padding: 0.5rem 1rem;">
                            üîÑ Refresh
                        </button>
            </div>

                        <div id="new-job-requests">
                            <p style="color: #9ca3af; text-align: center; padding: 2rem;">Loading job requests...</p>
                        </div>
                    </div>

                    <!-- Accepted Jobs -->
                    <div class="modal-content">
                        <h3 style="font-size: 1.5rem; margin-bottom: 1.5rem;">Accepted Jobs</h3>
                        <div id="accepted-jobs">
                            <p style="color: #9ca3af; text-align: center; padding: 2rem;">No accepted jobs yet</p>
                        </div>
                    </div>
                </div>

                <!-- Training Programs & Messages -->
                <div>
                    <div class="modal-content" style="margin-bottom: 2rem;">
                        <h3 style="font-size: 1.5rem; margin-bottom: 1.5rem;">Training Programs</h3>
                        <div id="training-programs">
                            <div style="border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem;" id="training-card-1">
                                <div style="display: flex; justify-content: space-between; align-items: start;">
                                    <div style="flex: 1;">
                                        <h4 style="font-weight: 600; margin-bottom: 0.5rem;">Advanced Dementia Care</h4>
                                        <p style="color: #6b7280; font-size: 0.875rem;">4 hours ‚Ä¢ Certificate awarded</p>
                                    </div>
                                    <button class="btn btn-outline training-btn" id="training-btn-1" onclick="showTrainingDetails(1)" style="padding: 0.5rem 1rem;">View Details</button>
                                </div>
                            </div>
                            <div style="border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1rem;" id="training-card-2">
                                <div style="display: flex; justify-content: space-between; align-items: start;">
                                    <div style="flex: 1;">
                                        <h4 style="font-weight: 600; margin-bottom: 0.5rem;">Emergency First Response</h4>
                                        <p style="color: #6b7280; font-size: 0.875rem;">6 hours ‚Ä¢ CPR Certification</p>
                                    </div>
                                    <button class="btn btn-outline training-btn" id="training-btn-2" onclick="showTrainingDetails(2)" style="padding: 0.5rem 1rem;">View Details</button>
                                </div>
                            </div>
                            <div style="border: 1px solid #e5e7eb; border-radius: 0.5rem; padding: 1rem;" id="training-card-3">
                                <div style="display: flex; justify-content: space-between; align-items: start;">
                                    <div style="flex: 1;">
                                        <h4 style="font-weight: 600; margin-bottom: 0.5rem;">Special Needs Care</h4>
                                        <p style="color: #6b7280; font-size: 0.875rem;">5 hours ‚Ä¢ Certificate awarded</p>
                                    </div>
                                    <button class="btn btn-outline training-btn" id="training-btn-3" onclick="showTrainingDetails(3)" style="padding: 0.5rem 1rem;">View Details</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="modal-content">
                        <h3 style="font-size: 1.5rem; margin-bottom: 1.5rem;">Messages</h3>
                        <div id="caregiver-messages-list">
                            <p style="color: #9ca3af; text-align: center; padding: 2rem;">No messages yet</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Caregiver Profile View Page -->
    <div id="caregiver-profile-view-page" class="page hidden">
        <div class="container" style="max-width: 900px; margin-top: 2rem;">
            <button class="btn btn-outline" onclick="showPage('caregiver-dashboard')" style="margin-bottom: 1rem;">
                ‚Üê Back to Dashboard
            </button>
            
            <div class="modal-content">
                <h2 style="font-size: 2rem; margin-bottom: 2rem;">My Caregiver Profile</h2>
                
                <div style="display: flex; gap: 2rem; margin-bottom: 2rem; flex-wrap: wrap;">
                    <div class="avatar" style="width: 100px; height: 100px; font-size: 2rem;" id="caregiver-profile-avatar">CG</div>
                    <div style="flex: 1;">
                        <h3 style="font-size: 1.5rem; margin-bottom: 0.5rem;" id="caregiver-profile-name">-</h3>
                        <div style="display: flex; gap: 1rem; margin-bottom: 1rem; flex-wrap: wrap;">
                            <div class="rating">
                                <span>‚≠ê</span>
                                <span id="caregiver-profile-rating">5.0</span>
                            </div>
                            <p style="color: #6b7280;" id="caregiver-profile-experience">- years experience</p>
                        </div>
                        <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                            <span class="badge badge-available">Available Now</span>
                        </div>
                    </div>
                    <div style="text-align: right;">
                        <div style="font-size: 2rem; font-weight: bold; color: #9333ea;" id="caregiver-profile-rate">RM -/hour</div>
                    </div>
                </div>

                <div class="grid grid-2" style="margin-bottom: 2rem;">
                    <div>
                        <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">Contact Information</h3>
                        <div style="margin-bottom: 1rem;">
                            <p style="color: #6b7280; font-size: 0.875rem;">Email</p>
                            <p style="font-weight: 600;" id="caregiver-profile-email">-</p>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <p style="color: #6b7280; font-size: 0.875rem;">Phone</p>
                            <p style="font-weight: 600;" id="caregiver-profile-phone">-</p>
                        </div>
                        <div style="margin-bottom: 1rem;">
                            <p style="color: #6b7280; font-size: 0.875rem;">Location</p>
                            <p style="font-weight: 600;" id="caregiver-profile-location">-</p>
                        </div>
                    </div>
                    
                    <div>
                        <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">Specialties</h3>
                        <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;" id="caregiver-profile-specialties"></div>
                        
                        <h3 style="font-size: 1.25rem; margin-top: 1.5rem; margin-bottom: 1rem;">Certifications</h3>
                        <div id="caregiver-profile-certifications">
                            <p style="color: #6b7280;">No certifications uploaded yet</p>
                        </div>
                    </div>
                </div>

                <div style="border-top: 1px solid #e5e7eb; padding-top: 2rem;">
                    <h3 style="font-size: 1.25rem; margin-bottom: 1rem;">Statistics</h3>
                    <div class="grid grid-3">
                        <div>
                            <p style="color: #6b7280; font-size: 0.875rem;">Total Jobs</p>
                            <p style="font-size: 1.5rem; font-weight: bold;" id="caregiver-total-jobs">0</p>
                        </div>
                        <div>
                            <p style="color: #6b7280; font-size: 0.875rem;">Total Earnings</p>
                            <p style="font-size: 1.5rem; font-weight: bold; color: #16a34a;" id="caregiver-total-earnings">RM 0</p>
                        </div>
                        <div>
                            <p style="color: #6b7280; font-size: 0.875rem;">Completion Rate</p>
                            <p style="font-size: 1.5rem; font-weight: bold;">100%</p>
                        </div>
                    </div>
                </div>
				
				<!-- NEW SECTION: Customer Reviews -->
				<div style="border-top: 1px solid #e5e7eb; padding-top: 2rem; margin-top: 2rem;">
					<h3 style="font-size: 1.5rem; margin-bottom: 1rem;">Customer Reviews & Ratings</h3>
					<div id="caregiver-reviews-section">
						<p style="color: #9ca3af; text-align: center; padding:2rem;">No reviews yet</p>
					</div>
				</div>
            </div>
        </div>
    </div>

    <!-- Chat Modal -->
    <div id="chat-modal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 1rem; border-bottom: 1px solid #e5e7eb;">
                <div style="display: flex; align-items: center; gap: 1rem;">
                    <div class="avatar" id="chat-avatar"></div>
                    <div>
                        <h3 style="font-size: 1.125rem;" id="chat-name"></h3>
                        <p style="color: #16a34a; font-size: 0.875rem;">‚óè Online</p>
                    </div>
                </div>
                <button onclick="closeChat()" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">√ó</button>
            </div>
            
            <div class="chat-container">
                <div class="chat-messages" id="chat-messages">
                    <div style="text-align: center; padding: 2rem; color: #9ca3af;">
                        <p>Start a conversation</p>
                    </div>
                </div>
                <div class="chat-input-container">
                    <input type="text" class="chat-input" id="chat-input" placeholder="Type your message..." onkeypress="handleChatKeyPress(event)">
                    <button class="btn btn-primary" onclick="sendMessage()">Send</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Job Details Modal -->
    <div id="job-details-modal" class="modal">
        <div class="modal-content">
            <!-- Content will be dynamically populated -->
        </div>
    </div>

    <!-- Training Details Modal -->
    <div id="training-modal" class="modal">
        <div class="modal-content" style="max-width: 700px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="font-size: 1.5rem;" id="training-title">Training Program</h2>
                <button onclick="closeModal('training-modal')" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">√ó</button>
            </div>

            <div style="display: flex; gap: 1rem; margin-bottom: 1.5rem;">
                <div style="background: #f3e8ff; padding: 0.5rem 1rem; border-radius: 0.5rem;">
                    <p style="color: #7e22ce; font-size: 0.875rem;">‚è±Ô∏è <span id="training-duration">-</span></p>
                </div>
                <div style="background: #dcfce7; padding: 0.5rem 1rem; border-radius: 0.5rem;">
                    <p style="color: #166534; font-size: 0.875rem;">üéì <span id="training-cert">-</span></p>
                </div>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h3 style="font-size: 1.125rem; margin-bottom: 0.75rem;">About This Course</h3>
                <p style="color: #6b7280; line-height: 1.6;" id="training-description">-</p>
            </div>

            <div style="margin-bottom: 1.5rem;">
                <h3 style="font-size: 1.125rem; margin-bottom: 0.75rem;">What You'll Learn</h3>
                <ul id="training-topics" style="list-style: none; padding: 0;">
                    <!-- Topics will be inserted here -->
                </ul>
            </div>

            <div style="background: #fef3c7; border: 1px solid #fde047; border-radius: 0.5rem; padding: 1rem; margin-bottom: 1.5rem;">
                <p style="color: #92400e; font-size: 0.875rem;">
                    <strong>Note:</strong> Upon completion, you will receive a certification that will be displayed on your caregiver profile, increasing your credibility and job opportunities.
                </p>
            </div>

            <div style="display: flex; gap: 1rem;">
                <button class="btn btn-primary" style="flex: 1;" id="training-enroll-btn" onclick="enrollTraining()">
                    Enroll Now
                </button>
                <button class="btn btn-outline" style="flex: 1;" onclick="closeModal('training-modal')">
                    Maybe Later
                </button>
            </div>
        </div>
    </div>

    <!-- Rating Modal -->
    <div id="rating-modal" class="modal">
        <div class="modal-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="font-size: 1.5rem;">Rate & Review</h2>
                <button onclick="closeModal('rating-modal')" style="background: none; border: none; font-size: 1.5rem; cursor: pointer;">√ó</button>
            </div>

            <div style="text-align: center; margin-bottom: 1.5rem;">
                <p style="margin-bottom: 1rem;">How was your experience with <strong id="rating-caregiver-name"></strong>?</p>
                <div style="display: flex; justify-content: center; gap: 0.5rem; font-size: 2rem;" id="star-rating">
                    <span class="star-btn" onclick="setRating(1)">‚≠ê</span>
                    <span class="star-btn" onclick="setRating(2)">‚≠ê</span>
                    <span class="star-btn" onclick="setRating(3)">‚≠ê</span>
                    <span class="star-btn" onclick="setRating(4)">‚≠ê</span>
                    <span class="star-btn" onclick="setRating(5)">‚≠ê</span>
                </div>
                <p style="margin-top: 0.5rem; color: #6b7280;" id="rating-text">Select a rating</p>
            </div>

            <div class="form-group">
                <label>Your Review (Optional)</label>
                <textarea id="review-text" rows="4" placeholder="Share your experience with this caregiver..." style="width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-family: inherit;"></textarea>
            </div>

            <button class="btn btn-primary" style="width: 100%; padding: 1rem;" onclick="submitRating()">
                Submit Review
            </button>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="success-modal" class="modal">
        <div class="modal-content text-center">
            <div class="success-icon">
                <svg style="width: 48px; height: 48px;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                </svg>
            </div>
            <h2 style="font-size: 2rem; margin-bottom: 1rem;" id="success-title">Success!</h2>
            <p id="success-message" style="margin-bottom: 1.5rem; color: #6b7280;"></p>
            <button class="btn btn-primary" onclick="closeSuccessModal()">Done</button>
        </div>
    </div>

    <script src="js/config.js"></script>
    <script src="js/script.js"></script>
</body>
</html>

